var Seven=function(){};self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{};var Prism=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{encode:function(e){return e instanceof i?new i(e.type,t.util.encode(e.content)):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var i=t.util.type(e);switch(i){case"Object":var s={};for(var n in e)e.hasOwnProperty(n)&&(s[n]=t.util.clone(e[n]));return s;case"Array":return e.slice()}return e}},languages:{extend:function(e,i){var s=t.util.clone(t.languages[e]);for(var n in i)s[n]=i[n];return s},insertBefore:function(e,i,s,n){n=n||t.languages;var r=n[e],o={};for(var a in r)if(r.hasOwnProperty(a)){if(a==i)for(var l in s)s.hasOwnProperty(l)&&(o[l]=s[l]);o[a]=r[a]}return n[e]=o},DFS:function(e,i){for(var s in e)i.call(e,s,e[s]),"Object"===t.util.type(e)&&t.languages.DFS(e[s],i)}},highlightAll:function(e,i){for(var s,n=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),r=0;s=n[r++];)t.highlightElement(s,e===!0,i)},highlightElement:function(s,n,r){for(var o,a,l=s;l&&!e.test(l.className);)l=l.parentNode;if(l&&(o=(l.className.match(e)||[,""])[1],a=t.languages[o]),a){s.className=s.className.replace(e,"").replace(/\s+/g," ")+" language-"+o,l=s.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var c=s.textContent;if(c){var h={element:s,language:o,grammar:a,code:c};if(t.hooks.run("before-highlight",h),n&&self.Worker){var p=new Worker(t.filename);p.onmessage=function(e){h.highlightedCode=i.stringify(JSON.parse(e.data),o),t.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(h.element),t.hooks.run("after-highlight",h)},p.postMessage(JSON.stringify({language:h.language,code:h.code}))}else h.highlightedCode=t.highlight(h.code,h.grammar,h.language),t.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(s),t.hooks.run("after-highlight",h)}}},highlight:function(e,s,n){var r=t.tokenize(e,s);return i.stringify(t.util.encode(r),n)},tokenize:function(e,i){var s=t.Token,n=[e],r=i.rest;if(r){for(var o in r)i[o]=r[o];delete i.rest}e:for(var o in i)if(i.hasOwnProperty(o)&&i[o]){var a=i[o];a="Array"===t.util.type(a)?a:[a];for(var l=0;l<a.length;++l){var c=a[l],h=c.inside,p=!!c.lookbehind,u=0;c=c.pattern||c;for(var g=0;g<n.length;g++){var d=n[g];if(n.length>e.length)break e;if(!(d instanceof s)){c.lastIndex=0;var f=c.exec(d);if(f){p&&(u=f[1].length);var m=f.index-1+u,f=f[0].slice(u),v=f.length,w=m+v,b=d.slice(0,m+1),y=d.slice(w+1),S=[g,1];b&&S.push(b);var k=new s(o,h?t.tokenize(f,h):f);S.push(k),y&&S.push(y),Array.prototype.splice.apply(n,S)}}}}}return n},hooks:{all:{},add:function(e,i){var s=t.hooks.all;s[e]=s[e]||[],s[e].push(i)},run:function(e,i){var s=t.hooks.all[e];if(s&&s.length)for(var n,r=0;n=s[r++];)n(i)}}},i=t.Token=function(e,t){this.type=e,this.content=t};if(i.stringify=function(e,s,n){if("string"==typeof e)return e;if("[object Array]"==Object.prototype.toString.call(e))return e.map(function(t){return i.stringify(t,s,e)}).join("");var r={type:e.type,content:i.stringify(e.content,s,n),tag:"span",classes:["token",e.type],attributes:{},language:s,parent:n};"comment"==r.type&&(r.attributes.spellcheck="true"),t.hooks.run("wrap",r);var o="";for(var a in r.attributes)o+=a+'="'+(r.attributes[a]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+o+">"+r.content+"</"+r.tag+">"},!self.document)return self.addEventListener?(self.addEventListener("message",function(e){var i=JSON.parse(e.data),s=i.language,n=i.code;self.postMessage(JSON.stringify(t.tokenize(n,t.languages[s]))),self.close()},!1),self.Prism):self.Prism;var s=document.getElementsByTagName("script");return s=s[s.length-1],s&&(t.filename=s.src,document.addEventListener&&!s.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)),self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,punctuation:/[\{\};:]/g,"function":/[-a-z0-9]+(?=\()/gi},Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/gi,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}}),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//g,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*?(\r?\n|$)/g,lookbehind:!0}],string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/gi,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/gi,inside:{punctuation:/\(/}},number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|<=?|>=?|={1,3}|&{1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|function|get|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/gi,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},atrule:/@[\w-]+(?=\s+(\(|\{|;))/gi,url:/([-a-z]+-)*url(?=\()/gi,selector:/([^@;\{\}\(\)]?([^@;\{\}\(\)]|&|\#\{\$[-_\w]+\})+)(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/gm}),Prism.languages.insertBefore("scss","atrule",{keyword:/@(if|else if|else|for|each|while|import|extend|debug|warn|mixin|include|function|return|content)|(?=@for\s+\$[-_\w]+\s)+from/i}),Prism.languages.insertBefore("scss","property",{variable:/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i}),Prism.languages.insertBefore("scss","ignore",{placeholder:/%[-_\w]+/i,statement:/\B!(default|optional)\b/gi,"boolean":/\b(true|false)\b/g,"null":/\b(null)\b/g,operator:/\s+([-+]{1,2}|={1,2}|!=|\|?\||\?|\*|\/|\%)\s+/g}),Seven.WindowView=function(){return Tendon.View.extend({events:{resize:"onResize",scroll:"onScroll"},onResize:function(){this.updateScroll()},onScroll:function(){this.updateScroll()},updateScroll:_.throttle(function(){var e=app.header&&app.header.height||50;this.pos=this.$el.scrollTop(),app.state("scrolling",!0),app.state("scrolled",this.pos>0),app.state("scrolled-nav",this.pos>e/4*3),this.updateScrollDirection(),clearTimeout(this.timer),this.timer=_.delay(_.bind(this.cleanupScroll,this),200)},100),updateScrollDirection:function(){this.pos&&this.lastPos&&this.pos!==this.lastPos&&(this.pos<this.lastPos?(app.state("scrolled-up",!0),app.state("scrolled-down",!1),this.vein.trigger("scrolled:up",this.pos)):(app.state("scrolled-up",!1),app.state("scrolled-down",!0),this.vein.trigger("scrolled:down",this.pos))),this.lastPos=this.pos},startScroll:function(){app.state("scrolling",!1),this.vein.trigger("scrolling:stop",this.pos)},cleanupScroll:function(){app.state("scrolling",!1),this.vein.trigger("scrolling:stop",this.pos)}})}(),Seven.DocumentView=function(){return Tendon.View.extend({})}(),Seven.AppScrollerView=function(){return Tendon.View.extend({onRender:function(){this.app=window.app,this.setupIScroll(),this.setupListeners()},setupListeners:function(){var e=this;this.app.vein.on("header:resize",function(t){this.$el.css("height",window.innerHeight).children().eq(0).css("padding-top",t),this.navHeight=t,_.defer(function(){e.scroll.refresh()})},this)},setupIScroll:function(){this.lastPos=0,this.scroll=new IScroll(this.$el.selector,{eventPassthrough:"horizontal",scrollbars:"custom",mouseWheel:!0,probeType:3}),this.scroll.on("scrollStart",_.bind(this.startScroll,this)),this.scroll.on("scroll",_.bind(this.updateScroll,this)),this.scroll.on("scrollEnd",_.bind(this.endScroll,this))},startScroll:function(){this.app.state("scrolling",!0),this.app.vein.trigger("scroll:start",this.pos),this.updateScrollDirection(),clearTimeout(this.timer)},endScroll:function(){this.app.state("scrolling",!1),this.app.vein.trigger("scroll:stop",this.pos),this.timer=_.delay(_.bind(function(){this.app.vein.trigger("scroll:longstop",this.pos)},this),600)},updateScroll:_.throttle(function(){this.pos=-1*this.scroll.y,this.app.vein.trigger("scroll:scrolling",this.pos),this.updateScrollState(),this.updateScrollNav(),this.updateScrollDirection(),this.lastPos=this.pos},10),updateScrollState:function(){this.pos>0?(this.vein.trigger("scrolled",this.pos),this.app.state("scrolled",!0)):this.app.state("scrolled",!1)},updateScrollNav:function(){this.pos>this.navHeight/4*3?this.app.state("scrolled-nav",!0):this.app.state("scrolled-nav",!1)},updateScrollDirection:function(){var e=this.pos<this.lastPos?"up":"down";this.dir!==e&&(this.dir=e,this.app.state("scrolled-up",this.pos<this.lastPos),this.app.state("scrolled-down",this.pos>this.lastPos)),this.app.vein.trigger("scroll:"+e,this.pos,{direction:e,pos:this.pos,lastpos:this.lastPos,delta:this.pos-this.lastPos})}})}(),Seven.HeaderView=function(){return Tendon.View.extend({ui:{mast:".l-header-mast",wrapper:".l-header-wrapper",logo:".logo",navItems:".nav-item"},onRender:function(){this.app=window.app,this.lastHeight=0,this.setupResize(),this.setupScroll()},setupResize:function(){this.app.vein.on("resize",_.throttle(_.bind(this.onResize,this),100))},onResize:function(){this.offsetMax=this.height=this.ui.wrapper.height(),this.lastHeight!==this.height&&(this.lastHeight=this.height,this.app.vein.trigger("header:resize",this.height),clearTimeout(this.timer),this.timer=_.delay(_.bind(this.onResize,this),100))},setupScroll:function(){this.offset=0,this.app.vein.on("scroll:up scroll:down",function(e,t){var i=e>this.height/4*3;this.updateOffset(t.delta),this.offset=i?this.offset:0,this.ui.mast.css("transform","translate(0, -"+this.offset+"px, 0)")},this),this.app.vein.on("scroll:longstop",function(e){var t=e>this.height/4*3,i=this.offset>this.offsetMax/2;this.offset=t&&i?this.offsetMax:0,this.ui.mast.transition({y:-1*this.offset},500)},this)},updateOffset:function(e){var t;e=_.isNaN(e)?0:e,t=0>e?!0:!1,e=Math.abs(e)/10,e=1>e?1:e,e=e>10?10:e,e=t?-1*e:e,this.offset+=e,this.offset=this.offset>this.offsetMax?this.offsetMax:this.offset,this.offset=this.offset<0?0:this.offset,this.offset=Math.ceil(this.offset)}})}(),Seven.ArticleView=function(){return Tendon.View.extend({ui:{content:".content",nodes:".content > *"},excluded:[".content-code"],onRender:function(){},setupWraps:function(){var e=this,t=$(document.createElement("div")).addClass("content-wrapper");this.ui.wrappedNodes=this.ui.nodes.filter(function(){var t=$(this);return!t.is.apply(t,e.excluded)}),this.ui.wrappedNodes.wrap(t)}})}(),Seven.ApplicationView=function(){return Tendon.View.extend({el:"#application",ui:{header:".l-header",footer:".l-footer",content:"#application-content",article:".l-article"},onRender:function(){this.document=new Seven.DocumentView({el:document}),this.scroller=new Seven.AppScrollerView({el:this.ui.content}),this.header=new Seven.HeaderView({el:this.ui.header}),this.setup(),this.setupPage(),this.setupResize()},setup:function(){var e=this;e.state("starting",!0),_.defer(function(){e.vein.trigger("resize")}),_.delay(function(){e.state("starting",!1)},500)},setupResize:function(){$(window).on("resize",_.throttle(_.bind(this.onResize,this),100))},onResize:function(){this.vein.trigger("resize")},setupPage:function(){this.ui.article.length>0&&(this.article=new Seven.ArticleView({el:this.ui.article}))}})}(),$(function(){window.app=new Seven.ApplicationView});