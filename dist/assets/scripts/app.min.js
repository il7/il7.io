var Seven=function(){};Seven.WindowView=function(){return Tendon.View.extend({events:{resize:"updateScroll",scroll:"updateScroll"},updateScroll:function(){var e=app.header&&app.header.height||50;this.pos=this.$el.scrollTop(),app.state("scrolling",!0),app.state("scrolled",this.pos>0),app.state("scrolled-nav",this.pos>e/4*3),this.updateScrollDirection(),clearTimeout(this.timer),this.timer=_.delay(_.bind(this.cleanupScroll,this),200)},updateScrollDirection:_.throttle(function(){this.pos&&this.lastPos&&this.pos!==this.lastPos&&(app.state("scrolled-up",this.pos<this.lastPos),app.state("scrolled-down",this.pos>this.lastPos)),this.lastPos=this.pos},200),cleanupScroll:function(){app.state("scrolling",!1)}})}(),Seven.DocumentView=function(){return Tendon.View.extend({})}(),Seven.HeaderView=function(){return Tendon.View.extend({ui:{mast:".l-header-mast",wrapper:".l-header-wrapper",logo:".logo",navItems:".nav-item"},onRender:function(){this.setupResize()},setupResize:function(){$(window).on("resize",{self:this},_.throttle(this.onResize,250)).trigger("resize")},onResize:function(e){var t=e.data.self;t.height=t.ui.wrapper.height(),t.$el.css("height",t.height),clearTimeout(this.timer),this.timer=_.delay(function(){t.onResize(e)},250)}})}(),Seven.ArticleView=function(){return Tendon.View.extend({ui:{content:".content",nodes:".content > *"},excluded:[".content-code"],onRender:function(){this.setupWraps()},setupWraps:function(){var e=this,t=$(document.createElement("div")).addClass("content-wrapper");this.ui.wrappedNodes=this.ui.nodes.filter(function(){var t=$(this);return!t.is.apply(t,e.excluded)}),this.ui.wrappedNodes.wrap(t)}})}(),Seven.ApplicationView=function(){return Tendon.View.extend({el:"#application",ui:{header:".l-header",footer:".l-footer",article:".l-article"},onRender:function(){this.window=new Seven.WindowView({el:window}),this.document=new Seven.DocumentView({el:document}),this.header=new Seven.HeaderView({el:this.ui.header}),this.setup(),this.setupPage()},setup:function(){var e=this;e.state("starting",!0),_.delay(function(){e.state("starting",!1)},500)},setupPage:function(){this.ui.article.length>0&&(this.article=new Seven.ArticleView({el:this.ui.article}))}})}(),$(function(){window.app=new Seven.ApplicationView});